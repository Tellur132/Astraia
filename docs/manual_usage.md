# マニュアルの使い方と運用ルール（Astraia Docs Playbook）

このページは Astraia ドキュメントの「読み方」と「書き方（運用ルール）」を定義します。
目的は次の3つです。

- 読み手が最短で目的を達成できる（迷子・詰まりを減らす）
- 書き手が迷わず一定品質で量産できる（テンプレ＋DoD）
- GitHub Pages 上でも破綻しない（リンク・構成・命名の統一）

---

## ディレクトリ構成（`docs/`）

- `index.md`: トップページ（導線の起点）
- `manual_usage.md`: 本ページ（運用ルール＋テンプレ）
- `howto/`: 手順書（How-to）。特定のゴールに向けた具体的な操作手順。
- `reference/`: 仕様や項目の一覧。CLI 引数や config schema、成果物の説明など。
- `explanations/`: 背景・概念の説明。設計意図や考え方を整理するもの。
- `decisions/`: 設計判断・計画・ADR 相当の記録。ロードマップや比較検討を含む。

---

## どのページに何を書くべきか（迷ったらここ）

- 「やり方（具体的な手順）」: `howto/`（例: インストール、実験実行、GUI の起動）
- 「項目の意味・仕様」: `reference/`（例: CLI 引数、config schema、成果物の一覧）
- 「背景・考え方」: `explanations/`（例: フレームワークの狙い、設計コンセプト）
- 「意思決定・計画」: `decisions/`（例: ロードマップ、設計方針、ADR）

---

## 読み方のヒント

- まず `howto/` で手順を確認し、細かい引数は `reference/` で調べる。
- 背景や意図を知りたいときは `explanations/`、選定理由は `decisions/` を参照。
- まずページ冒頭の「このページでわかること」「対象読者」を見て、自分向けか判断する。
- `Cmd/Ctrl + F` で探す。見出しは共通化する（後述テンプレ準拠）。
- 関連ページへ移動できるよう、末尾に「関連リンク」を置く（推奨）。

---

## 執筆ルール（必須）

### 1) 1 ページ 1 目的（スコープ固定）
- 1ページで達成する目的を1つに絞る。
- 別目的に話が逸れる場合は、別ファイルへ分離してリンクする。
- README には概要のみ、詳細は `docs/` に置く。

### 2) ファイル名（統一）
- 原則: **kebab-case**（例: `run-experiments.md`）
- 例外: 機械生成物・設定と強く結びつくものは snake_case を許容（例: `config_schema.md`）
- ASCII のみ、スペースや全角文字は避ける。

### 3) 見出し構造（必須セクション）
各ページは基本的に以下を含める（順序推奨）。

1. H1（タイトル）
2. このページでわかること（箇条書き）
3. 対象読者（1〜2行でOK）
4. 前提（環境・権限・依存）
5. 手順（番号付き）
6. 検証（成功判定の方法。期待出力があると親切）
7. トラブルシュート（よくある失敗と回避）
8. 関連リンク（任意だが推奨）

※ Reference（仕様）のページは「手順」を最小化し、用語・項目を網羅する。

### 4) コマンド／コードの書き方（コピペ可能を原則）
- コマンドはフェンスコードで言語指定（例: ```bash）。
- 変数は `<path>` のようにプレースホルダ表記にする。
- 可能なら限り「期待出力（例）」を添える。
- OS / シェル差分がある場合は明示する（例: macOS(zsh), Linux(bash), Windows(PowerShell)）。

（例）
```bash
# ここを変更: your-env-name
python -m venv <your-env-name>
source <your-env-name>/bin/activate
```
期待出力（例）:

- `which python` が `<your-env-name>/bin/python` を指す

### 5) リンクと画像（壊れない導線）

- 可能な限り相対パスを使用する。
- 先頭 `/` は付けない（ローカル閲覧と Pages の両方で破綻しやすい）。
- 新規ページは **最低1箇所から辿れる**状態にする（必須）。
    - 推奨: `docs/index.md` に追記
    - 代替: 関連ページ末尾の「関連リンク」から到達できる
- 画像や図は `docs/assets/`（または各章の `assets/`）に置き、相対リンクで参照する。

### 6) 言語

- 原則は日本語。
- 固有名詞（API 名、ライブラリ名、コマンド、エラー文）は英語のまま。

### 7) 更新メモ（Changelog）

- 手順や仕様を「変更」した場合はページ末尾に `Changelog` を追加し、日付＋1行で記録する。
- 表記例: `- 2025-12-02: install 手順を v2 に更新（uv を追記）`

---

## GitHub Pages 運用メモ

- Pages の公開設定やテーマによって表示は変わるため、相対リンク中心で書く。
- サイドバーがない場合を想定し、各ページ冒頭に短い導入（このページでわかること）を書く。

---
## 新規ページ作成テンプレ（How-to）

```markdown
# タイトル

このページでわかること:
- 何を達成できるか
- どこまでを扱うか（スコープ）

対象読者:
- 例: ローカル環境で実験を実行したい開発者

## 前提
- OS / バージョン（任意だがあると親切）
- 必須の依存（Python, Node, Docker など）
- 必要な環境変数、権限、想定ディレクトリ
- ここを変更: ユーザが編集すべき箇所があれば列挙

## 手順
1. ステップ 1
2. ステップ 2

## 検証（成功判定）
- 期待する結果（ログ、出力ファイル、終了コードなど）
- 可能ならコマンドでの確認方法

## トラブルシュート
- 症状: ○○
  - 原因:
  - 対処:

## 関連リンク
- `../index.md`
- `./related-topic.md`（任意）

## Changelog（任意）
- YYYY-MM-DD: 変更内容を1行で
```

---

## 追加テンプレ（Reference / 仕様）

````markdown
# タイトル（例: CLI / config リファレンス）

このページでわかること:
- 対象機能の仕様・項目一覧
- 設定値の意味と制約

対象読者:
- 例: 設定を調整して再現実験をしたい人

## 前提
- 対象バージョン（任意）
- 依存関係（任意）

## 用語
- 用語A: 定義

## 項目一覧
### item_name
- 型:
- デフォルト:
- 取りうる値:
- 影響:
- 例:

## 例（最小構成）
```yaml
# ここを変更: 最小サンプル
````

## 関連リンク

- （仕様に関連する How-to / Explanation へ）

---

## ドキュメントの完了条件（DoD / 作成時チェックリスト）

- [ ] タイトルと「このページでわかること」がある
- [ ] 対象読者が書かれている
- [ ] 前提（依存・環境変数・権限）が明確
- [ ] 手順が番号付きで、コピペしやすい
- [ ] 検証（成功判定）がある
- [ ] つまづきやすい点がトラブルシュートにある
- [ ] 最低1箇所から辿れる（推奨: index にリンク追加）
- [ ] ファイル名が規約どおり（原則 kebab-case）
- [ ] 変更が大きい場合は Changelog を記録
